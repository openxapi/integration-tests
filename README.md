# OpenXAPI Integration Tests

This repository contains integration tests for OpenXAPI-generated SDKs to ensure they work correctly with each release.

## Purpose

This repository serves as a comprehensive test suite for all SDKs generated by OpenXAPI. It validates that the generated code functions correctly against real exchange APIs, ensuring reliability and compatibility across different exchanges, languages, and protocols.

## Repository Structure

The repository follows a strict hierarchical structure:

```
src/
└── {exchange}/
    └── {language}/
        └── {protocol}/
            └── {module}/
```

Where:
- `{exchange}`: The cryptocurrency exchange (e.g., `binance`, `okx`, `bybit`)
- `{language}`: The programming language (e.g., `go`, `python`, `javascript`)
- `{protocol}`: The protocol type (`ws` for WebSocket, `rest` for REST API)
- `{module}`: The specific trading module (e.g., `spot`, `umfutures`, `cmfutures`)

### Current Structure:

```
src/
└── binance/              # Binance exchange tests
    └── go/              # Go language tests
        ├── ws/          # WebSocket API tests
        │   ├── spot/    # Spot trading WebSocket tests
        │   └── umfutures/ # USD-M Futures WebSocket tests
        └── rest/        # REST API tests (future)
```

## Development Guidelines

### Important Rules

1. **Module Isolation**: Each integration test folder is completely independent. When working on tests:
   - Only modify files within your dedicated module folder
   - Do not change files in other modules or exchanges
   - Each folder represents a specific `{exchange}/{language}/{protocol}/{module}` combination

2. **SDK Location**: The SDKs being tested are located outside this repository:
   - For `src/binance/go/ws/spot`, the SDK is at `../binance-go/ws/spot`
   - For `src/binance/go/ws/umfutures`, the SDK is at `../binance-go/ws/umfutures`
   - **Never modify SDK source files** - only create integration tests

3. **Adding New Integration Tests**:
   - Follow the exact directory structure: `src/{exchange}/{language}/{protocol}/{module}/`
   - Create all necessary test files within your module folder
   - Include a README.md specific to your module
   - Add appropriate `.gitignore` and `env.example` files

## Running Integration Tests

### Prerequisites

1. Navigate to the specific module directory
2. Set up environment variables:
   ```bash
   cd src/binance/go/ws/spot
   cp env.example env.local
   # Edit env.local with your API credentials
   source env.local
   ```

### Running Tests

By default, tests are run against the testnet server.

#### Binance Spot WebSocket Tests (Go)
```bash
cd src/binance/go/ws/spot
go test -v -run TestFullIntegrationSuite ./...
```

#### Binance USD-M Futures WebSocket Tests (Go)
```bash
cd src/binance/go/ws/umfutures
go test -v -run TestFullIntegrationSuite ./...
```

## Test Categories

### Public Tests
Tests for public endpoints that don't require authentication:
- Market data subscriptions
- Ticker information
- Order book depth

### Trading Tests
Tests for authenticated trading operations:
- Order placement and cancellation
- Account balance queries
- Position management

### Session Tests
Tests for WebSocket session management:
- Session authentication
- Connection handling
- Heartbeat/ping-pong

### User Data Tests
Tests for user data stream operations:
- User data stream lifecycle
- Account updates
- Order updates

## Notes

- Integration tests interact with real exchange endpoints
- Use testnet environments when available to avoid affecting real trading
- Some tests may require specific account permissions or balances
- Rate limits apply - tests include appropriate delays

## Contributing

When adding new integration tests:
1. Follow the existing directory structure
2. Include appropriate environment variable handling
3. Add comprehensive error checking
4. Document any special requirements
5. Update this README with new test information